<div class="div-interactionSociale">
  <app-like-button [post]="post"></app-like-button>

  <button matButton type="button" data-bs-toggle="offcanvas"
    [attr.aria-controls]="'offcanvasComment'+post._id" [attr.data-bs-target]="'#offcanvasComment'+ post._id">

    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-chat"
      viewBox="0 0 16 16">
      <path
        d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105" />
    </svg>
     <!-- {{post.commentsCount}} -->
  </button>

  <app-enregistrement-button [post]="post"></app-enregistrement-button>

  <button matButton [matMenuTriggerFor]="menu" type="button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus-icon lucide-plus">
      <path d="M5 12h14" />
      <path d="M12 5v14" />
    </svg>
  </button>

  <mat-menu #menu="matMenu">
    <button mat-menu-item (click)="displayListeConversations=true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-send-icon lucide-send">
        <path
          d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z" />
        <path d="m21.854 2.147-10.94 10.939" />
      </svg>
      Share
    </button>
    <button mat-menu-item  *ngIf="isMyPost" (click)="goToEditPost()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-square-pen-icon lucide-square-pen">
        <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
        <path
          d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z" />
      </svg>
      Edit
    </button>
    <button mat-menu-item class="btn btn-light" data-bs-toggle="offcanvas"
      [attr.aria-controls]="'offcanvasFormSignaler'+post._id"
      [attr.data-bs-target]="'#offcanvasFormSignaler'+ post._id">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-circle-alert-icon lucide-circle-alert">
        <circle cx="12" cy="12" r="10" />
        <line x1="12" x2="12" y1="8" y2="12" />
        <line x1="12" x2="12.01" y1="16" y2="16" />
      </svg>
      Signaler
    </button>
  </mat-menu>

</div>


<!-- LISTE CONVERSATION POUR ENVOYER UN POST A QQN -->
<div id="div-ListeConversations" *ngIf="displayListeConversations" class="modal-">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Envoyer {{ post.title }} Ã  </h5>
        <button type="button" class="close btn btn-light" (click)="displayListeConversations=false">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="item-user d-flex justify-content-between" *ngFor="let user of users">
          <div style="margin:10px 0;"> <img width="50px" height="50px" [src]="user[0].photos_profil" />
            {{user[0].firstName +" "+ user[0].lastName}}
          </div>
          <button (click)="sendPostByMesssagePrivee(user[0]._id, user[1])" class="btn btn-light"> Envoyer
          </button>
        </div>
        <div *ngIf="users.length==0">
          Aucune conversation pour le moment.
        </div>
      </div>
    </div>
  </div>
</div>


<!-- AFFICHAGE DU TITRE, BODY & TOUS LES COMMENTAIRES D'UN POST -->
<div class="offcanvas offcanvas-bottom" data-bs-scroll="true" tabindex="-1" [attr.id]="'offcanvasComment'+post._id"
  aria-labelledby="offcanvasWithBothOptionsLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel"> {{post.title}} </h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div class="body">
      {{post.body}}
    </div>
    <app-commentaire-list [id]="post._id"></app-commentaire-list>

  </div>
</div>





<!-- AFFICHAGE D'UN FOMRULAIRE POUR SIGNALER  -->
<div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" [attr.id]="'offcanvasFormSignaler'+post._id"
  aria-labelledby="offcanvasWithBothOptionsLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel"> {{post.title}} </h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div class="body">
      <app-signaler-post [post]="post"></app-signaler-post>
    </div>

  </div>
</div>